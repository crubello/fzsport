
  // agregaciones FZsports demo

  // en collecion users para agrupar por username y generar users_vistos
  
  [
    {
      $group:
        {
          _id: "$username",
          profile: {
            $push: "$profile",
          },
        },
    },
    {
      $out:
        "users_vistos",
    },
  ]

  // en records hacer agrupacion de torneos y equipos vistos
  // enriquecer mediante merge a users_vistos para poder
  // tomar ese imput y agregarlo al morelikethisque se ejecutaria en events

  [
    {
      $group: {
        _id: "$User ID",
        torneos_vistos: {
          $push: "$Torneo",
        },
        equipos_vistos: {
          $push: "$Equipos",
        },
      },
    },
    {
      $merge: {
        into: "users_vistos",
        on: "_id",
        whenMatched: "merge",
        whenNotMatched: "discard",
      },
    },
  ]


  // More Like this en events

  db.events.aggregate([
    {
      "$search": {
        "index": "test",
      "moreLikeThis": {
       "like":
       {
        "awayTeamName": "Sporting Cristal vs Deportivo Binacional",
        "homeTeamName": "Sporting Cristal vs Deportivo Binacional",
        }
      }
     }
    },
    { "$limit": 5},
    {
      "$project": {
        "_id": 1,
        "awayTeamName": 1,
        "homeTeamName": 1
      }
    }
  ])